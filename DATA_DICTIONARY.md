# Data Dictionary

This document provides detailed descriptions of all CSV files generated by the flood prediction analysis.

---

## 1. CZR_2026_Flood_Forecast.csv

**Purpose:** Monthly flood risk predictions for the entire year 2026.

**Use Case:** Strategic planning, pricing adjustments, capital allocation, and risk communication.

### Fields

| Field Name | Data Type | Description | Range/Values | Unit |
|------------|-----------|-------------|--------------|------|
| `year` | Integer | Forecast year | 2026 | Year |
| `month` | Integer | Month number | 1-12 | Month (1=Jan, 12=Dec) |
| `precipitation` | Float | Predicted monthly precipitation | 10-40 | Millimeters (mm) |
| `avg_dam_level` | Float | Predicted average dam capacity | 60-75 | Percentage (%) |
| `predicted_flood_severity` | Float | Calculated flood severity score | 10-25 | Severity index |
| `flood_risk_level` | String | Categorical risk classification | Low, Moderate, High | Risk category |

### Field Calculations

**predicted_flood_severity:**
```
Formula: (precipitation Ã— avg_dam_level) / 100

Example (August 2026):
  precipitation = 34.4 mm
  avg_dam_level = 70.5%
  severity = (34.4 Ã— 70.5) / 100 = 24.6
```

**flood_risk_level:**
```
Classification Rules:
  - Low:      severity < 12.0
  - Moderate: 12.0 â‰¤ severity < 24.0
  - High:     severity â‰¥ 24.0
```

### Sample Records

```csv
year,month,precipitation,avg_dam_level,predicted_flood_severity,flood_risk_level
2026,1,26.61,63.21,16.49,Moderate
2026,2,16.28,64.06,10.18,Low
2026,8,34.43,70.53,24.58,High
```

### Usage Examples

**Business Application 1: Premium Pricing**
```python
# Load forecast
df = pd.read_csv('CZR_2026_Flood_Forecast.csv')

# Calculate premium adjustment
df['premium_multiplier'] = df['flood_risk_level'].map({
    'Low': 1.0,
    'Moderate': 1.15,
    'High': 1.30
})

# Base premium: R 1,000
df['adjusted_premium'] = 1000 * df['premium_multiplier']
```

**Business Application 2: Capital Reserve Planning**
```python
# Calculate monthly exposure
df['expected_claims'] = df['predicted_flood_severity'] * 20  # Scale factor
df['capital_needed'] = df['expected_claims'] * 50000  # Avg claim amount

# Quarterly aggregation
quarterly_capital = df.groupby(df['month'] // 3)['capital_needed'].sum()
```

---

## 2. CZR_Model_Coefficients.csv

**Purpose:** Ranking of climate variables by their predictive power for flood risk.

**Use Case:** Model interpretation, feature selection, and understanding risk drivers.

### Fields

| Field Name | Data Type | Description | Range/Values | Unit |
|------------|-----------|-------------|--------------|------|
| `Feature` | String | Climate variable name | Variable names | N/A |
| `Coefficient` | Float | Regression coefficient (with sign) | -2.0 to 8.0 | Impact units |
| `Abs_Coefficient` | Float | Absolute value of coefficient | 0 to 8.0 | Impact magnitude |

### Feature Descriptions

| Feature | Description | Impact Direction |
|---------|-------------|------------------|
| `precipitation` | Monthly total precipitation | Positive (higher = more floods) |
| `avg_dam_level` | Average dam capacity utilization | Positive (fuller = more risk) |
| `dam_level_ma3` | 3-month moving average of dam levels | Negative (smoothing effect) |
| `avg_temp` | Monthly average temperature | Negative (cooler = more floods) |
| `temp_range` | Difference between max and min temp | Negative |
| `humidity` | Average relative humidity | Positive (more moisture = more rain) |
| `wind_speed` | Average wind speed | Negative (disperses moisture) |
| `air_pressure` | Average atmospheric pressure | Negative (low pressure = storms) |
| `max_temp` | Monthly maximum temperature | Negative |
| `min_temp` | Monthly minimum temperature | Positive |

### Interpretation Guide

**Coefficient Sign:**
- **Positive (+):** Increases in this variable increase flood severity
- **Negative (-):** Increases in this variable decrease flood severity

**Coefficient Magnitude:**
- **Large (>5.0):** Dominant predictor (e.g., precipitation)
- **Medium (1.0-5.0):** Important predictor (e.g., dam level)
- **Small (<1.0):** Minor predictor (e.g., wind speed)

### Sample Records

```csv
Feature,Coefficient,Abs_Coefficient
precipitation,7.107913,7.107913
avg_dam_level,2.539289,2.539289
dam_level_ma3,-0.909888,0.909888
```

### Usage Examples

**Identify Top Risk Drivers:**
```python
# Load coefficients
df = pd.read_csv('CZR_Model_Coefficients.csv')

# Sort by absolute value
top_features = df.nlargest(5, 'Abs_Coefficient')

# Visualize
import matplotlib.pyplot as plt
plt.barh(top_features['Feature'], top_features['Coefficient'])
plt.xlabel('Coefficient Value')
plt.title('Top 5 Flood Risk Predictors')
plt.show()
```

**Calculate Feature Impact:**
```python
# Example: Impact of 10mm precipitation increase
precip_coef = df[df['Feature'] == 'precipitation']['Coefficient'].values[0]
impact = 10 * precip_coef  # = 71.08 severity point increase
```

---

## 3. CZR_Model_Comparison.csv

**Purpose:** Performance evaluation of multiple machine learning models.

**Use Case:** Model selection, validation, and quality assurance.

### Fields

| Field Name | Data Type | Description | Range/Values | Unit |
|------------|-----------|-------------|--------------|------|
| `Model` | String | Name of the machine learning model | Model names | N/A |
| `Train RMSE` | Float | Root Mean Squared Error on training set | 0-10 | Error units |
| `Test RMSE` | Float | Root Mean Squared Error on test set | 0-10 | Error units |
| `Train RÂ²` | Float | R-squared score on training set | 0-1 | Proportion variance |
| `Test RÂ²` | Float | R-squared score on test set | 0-1 | Proportion variance |
| `Test MAE` | Float | Mean Absolute Error on test set | 0-10 | Error units |
| `Overfitting Gap` | Float | Difference between train and test RÂ² | 0-1 | Proportion difference |

### Metric Definitions

**RMSE (Root Mean Squared Error):**
```
Formula: sqrt(mean((y_true - y_pred)Â²))
Interpretation: Average prediction error (lower is better)
Acceptable range: < 3.0 for this dataset
```

**RÂ² (R-Squared / Coefficient of Determination):**
```
Formula: 1 - (SS_residual / SS_total)
Interpretation: Proportion of variance explained (higher is better)
Excellent: > 0.95
Good: 0.85 - 0.95
Acceptable: 0.70 - 0.85
Poor: < 0.70
```

**MAE (Mean Absolute Error):**
```
Formula: mean(|y_true - y_pred|)
Interpretation: Average absolute prediction error (lower is better)
More robust to outliers than RMSE
```

**Overfitting Gap:**
```
Formula: Train RÂ² - Test RÂ²
Interpretation: Degree of model overfitting
Excellent: < 0.05 (5%)
Good: 0.05 - 0.10
Concerning: > 0.10
Critical: > 0.15
```

### Model Evaluation Criteria

**Ideal Model Characteristics:**
1. âœ… High Test RÂ² (> 0.95)
2. âœ… Low Test RMSE (< 2.5)
3. âœ… Low Overfitting Gap (< 0.05)
4. âœ… Consistent Train/Test performance

### Sample Records

```csv
Model,Train RMSE,Test RMSE,Train RÂ²,Test RÂ²,Test MAE,Overfitting Gap
Linear Regression,0.543,2.257,0.995,0.969,1.751,0.026
Ridge Regression,0.642,2.338,0.993,0.966,1.842,0.026
Lasso Regression,0.670,2.348,0.992,0.966,1.870,0.026
Gradient Boosting,0.0002,4.941,1.000,0.849,3.631,0.151
```

### Usage Examples

**Select Best Model:**
```python
# Load model comparison
df = pd.read_csv('CZR_Model_Comparison.csv')

# Rank by test RÂ² (primary) and overfitting gap (secondary)
df['score'] = df['Test RÂ²'] - (0.5 * df['Overfitting Gap'])
best_model = df.nlargest(1, 'score')['Model'].values[0]

print(f"Best Model: {best_model}")
```

**Visualize Model Comparison:**
```python
import matplotlib.pyplot as plt

fig, axes = plt.subplots(1, 3, figsize=(15, 5))

# RÂ² comparison
axes[0].bar(df['Model'], df['Test RÂ²'])
axes[0].set_title('Test RÂ² by Model')
axes[0].set_ylabel('RÂ² Score')

# RMSE comparison
axes[1].bar(df['Model'], df['Test RMSE'])
axes[1].set_title('Test RMSE by Model')
axes[1].set_ylabel('RMSE')

# Overfitting comparison
axes[2].bar(df['Model'], df['Overfitting Gap'])
axes[2].set_title('Overfitting Gap by Model')
axes[2].set_ylabel('Gap')
axes[2].axhline(y=0.10, color='r', linestyle='--', label='Threshold')

plt.tight_layout()
plt.show()
```

---

## 4. Input Data Requirements

### Primary Input File

**Filename:** `Copy_of_Absa_QYF_Climate_Risk_Data_2026.xlsx`

**Expected Structure:**

| Column Name | Data Type | Description | Required |
|-------------|-----------|-------------|----------|
| `date` | Date | Observation date (YYYY-MM-DD) | Yes |
| `precipitation` | Float | Monthly precipitation (mm) | Yes |
| `avg_temp` | Float | Average temperature (Â°C) | Yes |
| `max_temp` | Float | Maximum temperature (Â°C) | Yes |
| `min_temp` | Float | Minimum temperature (Â°C) | Yes |
| `humidity` | Float | Relative humidity (%) | Yes |
| `wind_speed` | Float | Wind speed (km/h) | Yes |
| `air_pressure` | Float | Atmospheric pressure (hPa) | Yes |
| `avg_dam_level` | Float | Dam capacity (%) | Yes |

**Data Quality Requirements:**
- âœ… No missing values
- âœ… Numeric values within realistic ranges
- âœ… Chronologically ordered by date
- âœ… Minimum 36 observations (3 years) for reliable modeling

---

## 5. Data Versioning and Updates

### Version History

**v1.0 (January 30, 2026):**
- Initial 2026 forecast generation
- Model training on 2017-2021 data
- Linear regression selected as production model

### Update Frequency

**Recommended Schedule:**
- **Monthly:** Re-run forecasts with latest observed data
- **Quarterly:** Validate predictions against actual flood events
- **Annually:** Retrain models with expanded historical dataset

### Data Retention Policy

**CSV Files:**
- **Production forecasts:** Retain for 5 years
- **Model comparisons:** Retain for 3 years
- **Archived versions:** Store in `archive/YYYY-MM/` subdirectories

---

## 6. Data Usage Guidelines

### Access Control

**Public Data:**
- Model coefficients (anonymized)
- Aggregated regional statistics

**Restricted Data:**
- Individual property predictions
- Customer-specific risk scores
- Financial projections

### Compliance and Privacy

**POPIA (Protection of Personal Information Act) Compliance:**
- No personally identifiable information in CSV files
- Aggregated geographic data only
- Secure storage of customer linkage tables

**Insurance Regulations:**
- Transparent use of predictive models
- Non-discriminatory pricing practices
- Actuarial validation of risk assessments

---

## 7. Technical Specifications

### File Formats

**CSV Encoding:**
- **Character Set:** UTF-8
- **Delimiter:** Comma (,)
- **Line Terminator:** CRLF (Windows) or LF (Unix)
- **Header Row:** Included (first line)

**Numeric Precision:**
- **Floats:** 2-6 decimal places
- **Percentages:** Stored as decimals (e.g., 63.21 for 63.21%)
- **Missing Values:** Not applicable (complete dataset required)

### Integration APIs

**Sample Python Code:**
```python
import pandas as pd

# Load all forecast data
forecast = pd.read_csv('CZR_2026_Flood_Forecast.csv')
coefficients = pd.read_csv('CZR_Model_Coefficients.csv')
models = pd.read_csv('CZR_Model_Comparison.csv')

# Example: Get high-risk months
high_risk = forecast[forecast['flood_risk_level'] == 'High']
print(f"High risk months: {high_risk['month'].tolist()}")

# Example: Calculate weighted risk score
top_features = coefficients.nlargest(3, 'Abs_Coefficient')
print(f"Top 3 risk drivers: {top_features['Feature'].tolist()}")
```

---

## 8. Troubleshooting

### Common Issues

**Issue 1: File Not Found**
```
Solution: Ensure notebook has completed execution and CSV files are generated in the same directory
```

**Issue 2: Data Type Errors**
```
Solution: Use pd.read_csv() with dtype={'year': int, 'month': int} for explicit type casting
```

**Issue 3: Missing Columns**
```
Solution: Verify notebook version matches this data dictionary (v1.0+)
```

---

## ðŸ“ž Contact and Support

**Questions or Issues:**
- Climate Risk Analytics Team - QYF Group 1
- CZR Insurance Group (Case Study)
- *Note: This is an educational case study project*

**Last Updated:** January 30, 2026  
**Document Version:** 1.0  
**Compatible with:** Absa_CZR_Insurance_Flood_Prediction_Analysis.ipynb (v1.0+)
